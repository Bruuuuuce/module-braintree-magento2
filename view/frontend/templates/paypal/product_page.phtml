<?php

use Magento\Braintree\Block\Paypal\ProductPage;

/** @var ProductPage $block */

try {
    $id = sprintf('%s%s', $block->getContainerId(), random_int(PHP_INT_MIN, PHP_INT_MAX));
} catch (Exception $e) {
    /**
     * Exception only thrown if an appropriate source of randomness cannot be found.
     * https://www.php.net/manual/en/function.random-int.php
     */
    $id = 0;
}
$config = [
    'Magento_Braintree/js/paypal/product-page' => [
        'id' => $id,
        'environment' => $block->getEnvironment(),
        'clientToken' => $block->getClientToken(),
        'displayName' => $block->getMerchantName(),
        'payeeEmail' => $block->getPayeeEmail(),
        'actionSuccess' => $block->getActionSuccess(),
        'offerCredit' => $block->isCreditActive(),
        'shape' => $block->getButtonShape(),
        'size' => $block->getButtonSize(),
        'layout' => $block->getButtonLayout(),
        'color' => $block->getButtonColor(),
        'disabledFunding' => $block->getDisabledFunding()
    ]
];
?>

<div data-mage-init='<?= $block->escapeHtmlAttr(json_encode($config)) ?>'
     class="paypal checkout paypal-logo braintree-paypal-logo <?= $block->escapeHtmlAttr($block->getContainerId()) ?>-container">
    <div data-currency="<?= $block->escapeHtmlAttr($block->getCurrency()) ?>"
         data-locale="<?= $block->escapeHtmlAttr($block->getLocale()) ?>"
         data-amount="<?= $block->escapeHtmlAttr($block->getAmount()) ?>"
         id="<?= $block->escapeHtmlAttr($id) ?>"
         class="action-braintree-paypal-logo"></div>
</div>